-
    const filterByKeys = function(object, keys) {
        return Object.keys(object)
            .filter(key => keys.includes(key))
            .reduce((obj, key) => {
                obj[key] = object[key];
                return obj;
            }, {});
    }

- var br = '<br />'

mixin product_item(name, product)
    .item.ui.card.product__wrapper(data-product-id=name)
        .ui.image(data-behavior-dimmer, data-thumbnail-id=name)
            .ui.inverted.dimmer
                .content
                    .center
                        h2.ui.icon.header
                            i.zoom.icon
            img.thumbnail(
            src='img/thumbnails/' + product.images[0],
            alt=product.description
            )
        .content
            .header.product__title=product.title
            .ui.labeled.button.product__price-button-group(tabindex='0')
                .ui.primary.button.product__buy-button(
                data-request-function='addToCart'
                data-function-argument=name
                data-product-id=name
                )
                    span.product__buy-button_add
                        | В корзину
                    span.product__buy-button_goto
                        a(href='#shopping_cart') Оформить
                span.ui.basic.primary.left.pointing.label.product__price
                    =product.price > 0 ? product.price + " руб." : "Бесплатно"

mixin page_header(title)
    h2.page-header(data-animate-type="fade in")= title

doctype html
html
    head
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1")
        title Капсула времени
        link(rel="stylesheet" type="text/css" href="css/main.min.css")
        link(href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet")
        script(src="js/script.js" async)
    body#kapsula
        #introduction.container-fluid.one-page.introduction__page.gradient-page
            #header.container-fluid.menu-header__wrapper
                .ui.container
                    .row
                        .col-xl-3.menu-header__logo.header.item
                            a.middle.aligned.content(href='#')
                                img(src='img/logo.svg', alt='')
                        #menu.col-xl-9.item
                            .ui.relaxed.large.horizontal.divided.link.list
                                each item in menuItems
                                    - console.log(item)
                                    a.item.menu-header__item(href="#" + item.href)
                                        .middle.aligned.content
                                            i(class=item.icon + ' icon')
                                            =item.text
            .container
                .row.justify-content-center
                    .col-xl-4.col-lg-5.col-md-10.col-sm-12
                        h1
                            | Капсула Времени, именной подарок
                    .col-xl-4.col-lg-5.col-md-10.d-sm-none.d-xs-none.d-md-block.offset-lg-1
                        h3
                            | Более 4 лет производим оригинальные капсулы времени для корпоративных мероприятий и частных торжеств.
                .row
                    .col-12
                        img.ui.fluid.image(src='img/main_new.png')
                .row.justify-content-center
                    .col-lg-4.col-md-10.col-sm-12
                        .ui.primary.button
                            i.shop.icon
                            | В КОРЗИНУ
                    .col-lg-4.col-md-10.d-sm-none.d-md-block.offset-lg-1
                        p
                            | Мы делаем Капсулы Времени любых размеров и форм.


        #about_capsule.container-fluid.one-page.about-capsule__page
            +page_header("Что такое Капсула Времени?")
            .container(data-animate-type="fade up")
                .row.justify-content-center.animated
                    .col-md-10.col-sm-12
                        h3
                            | Капсула Времени - это оригинальный и интересный подарок, который подходит для мероприятий и торжеств по любому поводу и любого мастштаба.
                .row.justify-content-center
                    .col-lg-6.col-md-8.col-sm-12
                        .ui.relaxed.list.advices
                            .item
                                .content.about-capsule__text Мы вас выручим, если вы:
                            each item, icon in adviceItems
                                .item
                                    i(class=icon + ' icon')
                                    .content.about-capsule__text=item




        #capsule_content.container-fluid.one-page.capsule-content__page.gradient-page
            +page_header("Что можно положить в капсулу?")
            .container(data-animate-type="fade up")
                .row.justify-content-center
                    .col-md-10.col-sm-12
                        h3
                            | Капсула вместительная. В нее помещается 100-120 листов А4, а также миниатюрные предметы и аксессуары.
            .row.justify-content-center
                .col-1.d-none.d-lg-block
                    img(src='img/l-bg.png', alt='')
                .col-10
                    .container.tabs-container
                        .row.justify-content-center.d-sm-none.d-md-flex.tab-controllers
                            - var index = 0
                            each item, tab in tabSwitchers
                                .col-xl-2.col-md-3.col-sm-4(data-animate-indexed=((index++)/(Object.keys(tabSwitchers).length - 1)))
                                    .ui.raised.link.fluid.card.card-tab-switcher__wrapper(
                                        data-request-function='switchTo'
                                        data-function-argument=tab
                                        data-tab=tab
                                    )
                                        .image.ui.center.aligned.card-tab-switcher__image-wrapper
                                            img.ui.centered.medium.image(src='img/' + item.image)
                                        .content.center.aligned.card-tab-switcher__title-wrapper
                                            p.card-tab-switcher__title=item.text
                        .row.justify-content-center(data-animate-type="fade up")
                            .col-lg-10.col-md-12.tab-page__wrapper
                                .ui.blue.segment.container.tabs.tab-page__container
                                    each item, tab in tabs
                                        .row.justify-content-center.tab-page__content.transition.hidden(data-tab=tab)
                                            .col-lg-4.tab-page__image-wrapper
                                                .ui.image
                                                    img.ui.centered.fluid.image(src='img/' + item.image)
                                            .col-lg-8.tab-page__text=item.text
                .col-1.d-none.d-lg-block.right.floated
                    img(src='img/r-bg.png', style='float: right', alt='')

        .container-fluid.d-none.titanium-capsule-parallax

        #market.container-fluid.one-page.market__page
            +page_header("Заказ капсулы времени")
            .container
                .row.justify-content-center
                    .col-12
                        h3(data-animate-type="fade in") Выберите капсулу:
                        .owl-carousel.owl-theme.market__carousel(data-animate-type="fade up")
                            each product, name in filterByKeys(products, products_categories['capsules'])
                                +product_item(name, product)
                .row.justify-content-center
                    .col-12
                        h3(data-animate-type="fade in") Выберите дополнительные аксесуары:
                        .owl-carousel.owl-theme.market__carousel(data-animate-type="fade up")
                            each product, name in filterByKeys(products, products_categories['options'])
                                +product_item(name, product)

        #shopping_cart.container-fluid.one-page.shopping-cart__page.gradient-page
            +page_header("Корзина")
            .container
                .row.justify-content-center(data-animate-type="fade up")
                    .col-lg-6.col-md-10.col-sm-12
                        table.ui.celled.unstackable.table.shopping-cart__wrapper
                            thead.shopping-cart__header
                                tr
                                    th.shopping-cart__number_cell #
                                    th.shopping-cart__item-name_cell(colspan=2) Наименование
                                    th.shopping-cart__price_cell Цена
                            tbody.shopping-cart__body
                                tr.shopping-cart__empty-handler
                                    td(colspan=4) Ваша корзина пуста.
                                        |
                                        |
                                        a(href='#market') К покупкам!
                                template.d-none(data-product-template='desktop')
                                    tr(data-product-id='data-template-id')
                                        td.middle.aligned.shopping-cart__number_cell data-template-index
                                        td.shopping-cart__product-name_cell
                                            h4.ui.image.header
                                                img.ui.medium.bordered.image.shopping-cart__product-image(
                                                src='data-template-file',
                                                data-thumbnail-id='data-template-id'
                                                )
                                                .content data-template-title
                                                    .sub.header Подзаголовок
                                        td.middle.aligned.shopping-cart__actions_cell
                                            button.small.ui.red.icon.button.shopping-cart__action(
                                                data-tooltip='Убрать из корзины' data-inverted
                                                data-request-function='removeFromCart'
                                                data-function-argument='data-template-id'
                                            )
                                                i.icon.trash
                                        td.middle.aligned.shopping-cart__price_cell
                                            span.shopping-cart__price data-template-price
                                template.d-none(data-product-template='mobile')
                                    tr(data-product-id='data-template-id')
                                        td.middle.aligned.shopping-cart__number_cell data-template-index
                                        td.shopping-cart__product-name_cell
                                            h4.ui.image.header
                                                .content data-template-title
                                                    .sub.header Подзаголовок
                                        td.middle.aligned.shopping-cart__actions_cell
                                            button.small.ui.red.icon.button.shopping-cart__action(
                                                data-tooltip='Убрать из корзины' data-inverted
                                                data-request-function='removeFromCart'
                                                data-function-argument='data-template-id'
                                            )
                                                i.icon.trash
                                        td.middle.aligned.shopping-cart__price_cell
                                            span.shopping-cart__price data-template-price
                            tfoot.shopping-cart__footer
                                tr.shopping-cart__footer-row
                                    th.shopping-cart__result-title-cell(colspan=3) Итого
                                    th.shopping-cart__result-price-cell 0


        #adventages.container-fluid.one-page.adventages__page
            +page_header("Наши преимущества")
            .container
                .row.justify-content-center
                    .col-md-10.col-sm-12
                        .row.justify-content-center.advantages__wrapper(data-animate-type="fade up")
                            each advantage, index in advantages
                                .col-lg-6.col-md-12.row.advantages__item
                                    .container-fluid
                                        .row
                                            .col-3.text-center
                                                h3.ui.icon.header
                                                    i(class=advantage.icon + ' icon')
                                            .col-9.advantages__text=advantage.description
                            if advantages.length % 2 === 1
                                .col-lg-6.d-lg-flex.d-none.row

        #events.container-fluid.one-page.events__page.d-none
            +page_header("Какое у вас мероприятие?")
            .owl-carousel.owl-theme.events__carousel
                each event in events
                    .item.events__item
                        img.owl-lazy.events__image(data-src="img/events/" + event.image)
                        h3.events__title= event.title
                        div.events__description-block
                            span.events__description-text= event.description
                            a.events__link(href=event.link) Подробнее


        #gallery.container-fluid.one-page.gallery__page
            +page_header("Галерея")
            .owl-carousel.owl-theme.gallery__carousel
                each photo in gallery
                    .item.gallery__item
                        img.owl-lazy.gallery__image(data-src="img/thumbnails/" + photo.image)

        #contacts.container-fluid.one-page.footer__page.gradient-page
            .row.justify-content-center
                .col-lg-3.footer__col
                    img.footer__logo(src='img/logo.svg', alt='')
                    p «Капсула времени» — первое в России агентство посланий во времени.
                    p 117216 г. Москва ул Старокочаловская д1 к2. Филиал «Точка» Публичного акционерного общества «Ханты-Мансийский банк Открытие»
                    p ТОЧКА ПАО БАНКА «ФК ОТКРЫТИЕ» !{br}
                        | PC: 40802810205500000055 !{br}
                        | КС: 30101810845250000999 !{br}
                        | БИК: 044525999
                .col-lg-3.footer__col
                    h3.ui.header.footer__header
                        i.phone.icon
                        .content Контактная информация
                    p г. Челябинск, Проспект Победы, дом 160.
                    p г. Санкт-Петербург. Набережная обводного канала, дом 138 (Красный треугольник).
                    p +7 (499) 375-83-08
                .col-lg-3.footer__col.footer__header
                    h3.ui.header
                        i.share.alternate.icon
                        .content Мы в соц. сетях



        include photoswipe.html